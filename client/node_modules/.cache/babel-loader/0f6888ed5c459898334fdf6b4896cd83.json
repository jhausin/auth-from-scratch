{"remainingRequest":"/Users/jannik/dev/auth-from-scratch/client/node_modules/babel-loader/lib/index.js!/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jannik/dev/auth-from-scratch/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jannik/dev/auth-from-scratch/client/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jannik/dev/auth-from-scratch/client/src/views/Login.vue","mtime":1600258978936},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBKb2kgZnJvbSAiam9pIjsKdmFyIExPR0lOX1VSTCA9ICJodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aC9sb2dpbiI7CnZhciBzY2hlbWEgPSBKb2kub2JqZWN0KCkua2V5cyh7CiAgdXNlcm5hbWU6IEpvaS5zdHJpbmcoKS5yZWdleCgvKF5bYS16QS1aMC05X10rJCkvKS5taW4oMikubWF4KDMwKS5yZXF1aXJlZCgpLAogIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCkudHJpbSgpLm1pbig4KS5yZXF1aXJlZCgpCn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yTWVzc2FnZTogIiIsCiAgICAgIHVzZXI6IHsKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdXNlcjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIiI7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnZhbGlkVXNlcigpKSB7CiAgICAgICAgY29uc29sZS5sb2coImxvZ2dpbmcgaW4uLi4iKTsKICAgICAgICB2YXIgYm9keSA9IHsKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXIudXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy51c2VyLnBhc3N3b3JkCiAgICAgICAgfTsKICAgICAgICBmZXRjaChMT0dJTl9VUkwsIHsKICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL2Rhc2hib2FyZCIpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgX3RoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3I7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZFVzZXI6IGZ1bmN0aW9uIHZhbGlkVXNlcigpIHsKICAgICAgdmFyIF9zY2hlbWEkdmFsaWRhdGUgPSBzY2hlbWEudmFsaWRhdGUodGhpcy51c2VyKSwKICAgICAgICAgIHZhbHVlID0gX3NjaGVtYSR2YWxpZGF0ZS52YWx1ZSwKICAgICAgICAgIGVycm9yID0gX3NjaGVtYSR2YWxpZGF0ZS5lcnJvcjsKCiAgICAgIGlmIChlcnJvciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIldyb25nIFVzZXJuYW1lIG9yIFBhc3N3b3JkLiI7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,OAAA,GAAA,MAAA,KAAA;AAEA,IAAA,SAAA,GAAA,kCAAA;AAEA,IAAA,MAAA,GAAA,GAAA,CAAA,MAAA,GAAA,IAAA,CAAA;AACA,EAAA,QAAA,EAAA,GAAA,CAAA,MAAA,GACA,KADA,CACA,mBADA,EAEA,GAFA,CAEA,CAFA,EAGA,GAHA,CAGA,EAHA,EAIA,QAJA,EADA;AAMA,EAAA,QAAA,EAAA,GAAA,CAAA,MAAA,GACA,IADA,GAEA,GAFA,CAEA,CAFA,EAGA,QAHA;AANA,CAAA,CAAA;AAWA,eAAA;AACA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,YAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA;AAFA,KAAA;AAAA,GADA;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,OADA,qBACA;AACA,aAAA,YAAA,GAAA,EAAA;AACA,OAHA;AAIA,MAAA,IAAA,EAAA;AAJA;AADA,GARA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AACA,UAAA,KAAA,SAAA,EAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,eAAA;AACA,YAAA,IAAA,GAAA;AACA,UAAA,QAAA,EAAA,KAAA,IAAA,CAAA,QADA;AAEA,UAAA,QAAA,EAAA,KAAA,IAAA,CAAA;AAFA,SAAA;AAIA,QAAA,KAAA,CAAA,SAAA,EAAA;AACA,UAAA,MAAA,EAAA,MADA;AAEA,UAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAFA;AAGA,UAAA,OAAA,EAAA;AACA,4BAAA;AADA;AAHA,SAAA,CAAA,CAOA,IAPA,CAOA,UAAA,QAAA,EAAA;AACA,cAAA,QAAA,CAAA,EAAA,EAAA;AACA,mBAAA,QAAA,CAAA,IAAA,EAAA;AACA;;AACA,iBAAA,QAAA,CAAA,IAAA,GAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,kBAAA,IAAA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AACA,WAFA,CAAA;AAGA,SAdA,EAeA,IAfA,CAeA,YAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,YAAA;AACA,SAjBA,EAkBA,KAlBA,CAkBA,UAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,SApBA;AAqBA;AACA,KA9BA;AA+BA,IAAA,SA/BA,uBA+BA;AAAA,6BACA,MAAA,CAAA,QAAA,CAAA,KAAA,IAAA,CADA;AAAA,UACA,KADA,oBACA,KADA;AAAA,UACA,KADA,oBACA,KADA;;AAEA,UAAA,KAAA,KAAA,SAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,WAAA,YAAA,GAAA,6BAAA;AACA,aAAA,KAAA;AACA;AAtCA;AAhBA,CAAA","sourcesContent":["<template>\n  <section>\n    <h1>Login</h1>\n    <div v-if=\"errorMessage\" class=\"alert alert-danger\" role=\"alert\">\n      {{ errorMessage }}\n    </div>\n    <form @submit.prevent=\"login()\">\n      <div class=\"form-group\">\n        <label for=\"username\">Username:</label>\n        <input\n          v-model=\"user.username\"\n          type=\"text\"\n          class=\"form-control\"\n          id=\"username\"\n          placeholder=\"Enter Username\"\n          aria-describedby=\"usernameHelp\"\n          required\n        />\n        <small id=\"usernameHelp\" class=\"form-text text-muted\">\n          Enter Username to login.\n        </small>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password:</label>\n        <input\n          v-model=\"user.password\"\n          type=\"password\"\n          class=\"form-control\"\n          id=\"password\"\n          placeholder=\"Enter Password\"\n          aria-describedby=\"passwordHelp\"\n          required\n        />\n        <small id=\"passwordHelp\" class=\"form-text text-muted\">\n          Enter Password.\n        </small>\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">Login</button>\n    </form>\n  </section>\n</template>\n\n<script>\nimport Joi from \"joi\";\n\nconst LOGIN_URL = \"http://localhost:5000/auth/login\";\n\nconst schema = Joi.object().keys({\n  username: Joi.string()\n    .regex(/(^[a-zA-Z0-9_]+$)/)\n    .min(2)\n    .max(30)\n    .required(),\n  password: Joi.string()\n    .trim()\n    .min(8)\n    .required(),\n});\nexport default {\n  data: () => ({\n    errorMessage: \"\",\n    user: {\n      username: \"\",\n      password: \"\",\n    },\n  }),\n  watch: {\n    user: {\n      handler() {\n        this.errorMessage = \"\";\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    login() {\n      if (this.validUser()) {\n        console.log(\"logging in...\");\n        const body = {\n          username: this.user.username,\n          password: this.user.password,\n        };\n        fetch(LOGIN_URL, {\n          method: \"POST\",\n          body: JSON.stringify(body),\n          headers: {\n            \"content-type\": \"application/json\",\n          },\n        })\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n            return response.json().then((error) => {\n              throw new Error(error.message);\n            });\n          })\n          .then(() => {\n            this.$router.push(\"/dashboard\");\n          })\n          .catch((error) => {\n            this.errorMessage = error;\n          });\n      }\n    },\n    validUser() {\n      const { value, error } = schema.validate(this.user);\n      if (error === undefined) {\n        return true;\n      }\n      this.errorMessage = \"Wrong Username or Password.\";\n      return false;\n    },\n  },\n};\n</script>\n\n<style></style>\n"],"sourceRoot":"src/views"}]}