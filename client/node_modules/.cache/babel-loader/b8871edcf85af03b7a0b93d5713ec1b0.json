{"remainingRequest":"/Users/jannik/dev/auth-from-scratch/client/node_modules/babel-loader/lib/index.js!/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jannik/dev/auth-from-scratch/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jannik/dev/auth-from-scratch/client/src/views/SignUp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jannik/dev/auth-from-scratch/client/src/views/SignUp.vue","mtime":1600180214707},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEpvaSBmcm9tICJqb2kiOwppbXBvcnQgTG9hZGluZyBmcm9tICIuLi9hc3NldHMvbG9hZGluZy1sb29wLnN2ZyI7CnZhciBTSUdOVVBfVVJMID0gImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoL3NpZ251cCI7CnZhciBzY2hlbWEgPSBKb2kub2JqZWN0KCkua2V5cyh7CiAgdXNlcm5hbWU6IEpvaS5zdHJpbmcoKS5yZWdleCgvKF5bYS16QS1aMC05X10rJCkvKS5taW4oMikubWF4KDMwKS5yZXF1aXJlZCgpLAogIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCkudHJpbSgpLm1pbig4KS5yZXF1aXJlZCgpLAogIGNvbmZpcm1QYXNzd29yZDogSm9pLnN0cmluZygpLnRyaW0oKS5taW4oOCkucmVxdWlyZWQoKQp9KTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaWduaW5nVXA6IGZhbHNlLAogICAgICBlcnJvck1lc3NhZ2U6ICIiLAogICAgICB1c2VyOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICBjb25maXJtUGFzc3dvcmQ6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdXNlcjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIiI7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNpZ251cDogZnVuY3Rpb24gc2lnbnVwKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudmFsaWRVc2VyKCkpIHsKICAgICAgICBjb25zb2xlLmxvZygiVXNlciBpcyB2YWxpZC4gc2VuZGluZyBkYXRhIHRvIHNlcnZlci4uLiIpOwogICAgICAgIHZhciBib2R5ID0gewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlci51c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnVzZXIucGFzc3dvcmQKICAgICAgICB9OwogICAgICAgIHRoaXMuc2lnbmluZ1VwID0gdHJ1ZTsgLy9pZiB2YWxpZCA9PiBzZW5kIHRvIHNlcnZlcgoKICAgICAgICBmZXRjaChTSUdOVVBfVVJMLCB7CiAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIC8vaWYgcmVzcG9uc2Ugb2sgPT4gdXNlciBzaWduZWQgdXAKICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgfSAvL290aGVyd2lzZSB0aGVyZSB3YXMgYW4gZXJyb3IgPT4gdGhyb3cgbmV3IEVycm9yID0+IGhhbmRsZSBpdAoKCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpLnRoZW4oZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNpZ25pbmdVcCA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNpZ25pbmdVcCA9IGZhbHNlOwogICAgICAgICAgICBfdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZFVzZXI6IGZ1bmN0aW9uIHZhbGlkVXNlcigpIHsKICAgICAgaWYgKHRoaXMudXNlci5wYXNzd29yZCAhPT0gdGhpcy51c2VyLmNvbmZpcm1QYXNzd29yZCkgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIlBhc3N3b3JkIG11c3QgbWF0Y2guIjsKICAgICAgfQoKICAgICAgdmFyIF9zY2hlbWEkdmFsaWRhdGUgPSBzY2hlbWEudmFsaWRhdGUodGhpcy51c2VyKSwKICAgICAgICAgIHZhbHVlID0gX3NjaGVtYSR2YWxpZGF0ZS52YWx1ZSwKICAgICAgICAgIGVycm9yID0gX3NjaGVtYSR2YWxpZGF0ZS5lcnJvcjsKCiAgICAgIGlmIChlcnJvciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCJ1c2VybmFtZSIpKSB7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAiSW52YWxpZCBVc2VybmFtZS4iOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIkludmFsaWQgUGFzc3dvcmQuIjsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["SignUp.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <section>\n    <h1>Sign Up</h1>\n    <div v-if=\"signingUp\">\n      <img src=\"../assets/loading-loop.svg\" />\n    </div>\n    <div v-if=\"errorMessage\" class=\"alert alert-danger\" role=\"alert\">\n      {{ errorMessage }}\n    </div>\n    <form v-if=\"!signingUp\" @submit.prevent=\"signup\">\n      <div class=\"form-group\">\n        <label for=\"username\">Username</label>\n        <input\n          v-model=\"user.username\"\n          type=\"text\"\n          class=\"form-control\"\n          id=\"username\"\n          placeholder=\"Enter Username\"\n          aria-describedby=\"usernameHelp\"\n          required\n        />\n        <small id=\"usernameHelp\" class=\"form-text text-muted\">\n          Username must be longer than 2 characters and shorter than 30.\n          <br />Username can only contain alphanumeric characters and\n          underscores.\n        </small>\n      </div>\n      <div class=\"form-row\">\n        <div class=\"form-group col-md-6\">\n          <label for=\"password\">Password</label>\n          <input\n            v-model=\"user.password\"\n            type=\"password\"\n            class=\"form-control\"\n            id=\"password\"\n            placeholder=\"Password\"\n            required\n          />\n          <small id=\"passwordHelp\" class=\"form-text text-muted\"\n            >Password must be at least 8 characters long.</small\n          >\n        </div>\n        <div class=\"form-group col-md-6\">\n          <label for=\"confirmPassword\">Confirm Password</label>\n          <input\n            v-model=\"user.confirmPassword\"\n            type=\"password\"\n            class=\"form-control\"\n            id=\"confirmPassword\"\n            placeholder=\"Confirm Password\"\n            required\n          />\n          <small id=\"confirmPasswordHelp\" class=\"form-text text-muted\"\n            >Please confirm password.</small\n          >\n        </div>\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n    </form>\n  </section>\n</template>\n\n<script>\nimport Joi from \"joi\";\nimport Loading from \"../assets/loading-loop.svg\";\n\nconst SIGNUP_URL = \"http://localhost:5000/auth/signup\";\n\nconst schema = Joi.object().keys({\n  username: Joi.string()\n    .regex(/(^[a-zA-Z0-9_]+$)/)\n    .min(2)\n    .max(30)\n    .required(),\n  password: Joi.string()\n    .trim()\n    .min(8)\n    .required(),\n  confirmPassword: Joi.string()\n    .trim()\n    .min(8)\n    .required(),\n});\nexport default {\n  data: () => ({\n    signingUp: false,\n    errorMessage: \"\",\n    user: {\n      username: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n    },\n  }),\n  watch: {\n    user: {\n      handler() {\n        this.errorMessage = \"\";\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    signup() {\n      if (this.validUser()) {\n        console.log(\"User is valid. sending data to server...\");\n        const body = {\n          username: this.user.username,\n          password: this.user.password,\n        };\n        this.signingUp = true;\n        //if valid => send to server\n        fetch(SIGNUP_URL, {\n          method: \"POST\",\n          body: JSON.stringify(body),\n          headers: {\n            \"content-type\": \"application/json\",\n          },\n        })\n          .then((response) => {\n            //if response ok => user signed up\n            if (response.ok) {\n              return response.json();\n            }\n            //otherwise there was an error => throw new Error => handle it\n            return response.json().then((error) => {\n              throw new Error(error.message);\n            });\n          })\n          .then(() => {\n            setTimeout(() => {\n              this.signingUp = false;\n              this.$router.push(\"/login\");\n            }, 1000);\n          })\n          .catch((error) => {\n            setTimeout(() => {\n              this.signingUp = false;\n              this.errorMessage = error.message;\n            }, 1000);\n          });\n      }\n    },\n    validUser() {\n      if (this.user.password !== this.user.confirmPassword) {\n        this.errorMessage = \"Password must match.\";\n      }\n      const { value, error } = schema.validate(this.user);\n\n      if (error === undefined) {\n        return true;\n      }\n      if (error.message.includes(\"username\")) {\n        this.errorMessage = \"Invalid Username.\";\n      } else {\n        this.errorMessage = \"Invalid Password.\";\n      }\n      return false;\n    },\n  },\n};\n</script>\n<style></style>\n"],"sourceRoot":"src/views"}]}