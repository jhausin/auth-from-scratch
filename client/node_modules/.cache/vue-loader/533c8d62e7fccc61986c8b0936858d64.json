{"remainingRequest":"/Users/jannik/dev/auth-from-scratch/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jannik/dev/auth-from-scratch/client/src/views/SignUp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jannik/dev/auth-from-scratch/client/src/views/SignUp.vue","mtime":1600162149759},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jannik/dev/auth-from-scratch/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBKb2kgZnJvbSAiam9pIjsKCmNvbnN0IFNJR05VUF9VUkwgPSAiaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGgvc2lnbnVwIjsKCmNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3QoKS5rZXlzKHsKICB1c2VybmFtZTogSm9pLnN0cmluZygpCiAgICAucmVnZXgoLyheW2EtekEtWjAtOV9dKyQpLykKICAgIC5taW4oMikKICAgIC5tYXgoMzApCiAgICAucmVxdWlyZWQoKSwKICBwYXNzd29yZDogSm9pLnN0cmluZygpCiAgICAudHJpbSgpCiAgICAubWluKDgpCiAgICAucmVxdWlyZWQoKSwKICBjb25maXJtUGFzc3dvcmQ6IEpvaS5zdHJpbmcoKQogICAgLnRyaW0oKQogICAgLm1pbig4KQogICAgLnJlcXVpcmVkKCksCn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIGVycm9yTWVzc2FnZTogIiIsCiAgICB1c2VyOiB7CiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBjb25maXJtUGFzc3dvcmQ6ICIiLAogICAgfSwKICB9KSwKICB3YXRjaDogewogICAgdXNlcjogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIiI7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgc2lnbnVwKCkgewogICAgICBpZiAodGhpcy52YWxpZFVzZXIoKSkgewogICAgICAgIGNvbnNvbGUubG9nKCJVc2VyIGlzIHZhbGlkLiBzZW5kaW5nIGRhdGEgdG8gc2VydmVyLi4uIik7CiAgICAgICAgY29uc3QgYm9keSA9IHsKICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXIudXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy51c2VyLnBhc3N3b3JkLAogICAgICAgIH07CiAgICAgICAgZmV0Y2goU0lHTlVQX1VSTCwgewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbigoZXJyb3IpID0+IHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCh1c2VyKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZFVzZXIoKSB7CiAgICAgIGlmICh0aGlzLnVzZXIucGFzc3dvcmQgIT09IHRoaXMudXNlci5jb25maXJtUGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICJQYXNzd29yZCBtdXN0IG1hdGNoLiI7CiAgICAgIH0KICAgICAgY29uc3QgeyB2YWx1ZSwgZXJyb3IgfSA9IHNjaGVtYS52YWxpZGF0ZSh0aGlzLnVzZXIpOwoKICAgICAgaWYgKGVycm9yID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygidXNlcm5hbWUiKSkgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gIkludmFsaWQgVXNlcm5hbWUuIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICJJbnZhbGlkIFBhc3N3b3JkLiI7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["SignUp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignUp.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section>\n    <h1>Sign Up</h1>\n    <div v-if=\"errorMessage\" class=\"alert alert-danger\" role=\"alert\">\n      {{ errorMessage }}\n    </div>\n    <form @submit.prevent=\"signup\">\n      <div class=\"form-group\">\n        <label for=\"username\">Username</label>\n        <input\n          v-model=\"user.username\"\n          type=\"text\"\n          class=\"form-control\"\n          id=\"username\"\n          placeholder=\"Enter Username\"\n          aria-describedby=\"usernameHelp\"\n          required\n        />\n        <small id=\"usernameHelp\" class=\"form-text text-muted\">\n          Username must be longer than 2 characters and shorter than 30.\n          <br />Username can only contain alphanumeric characters and\n          underscores.\n        </small>\n      </div>\n      <div class=\"form-row\">\n        <div class=\"form-group col-md-6\">\n          <label for=\"password\">Password</label>\n          <input\n            v-model=\"user.password\"\n            type=\"password\"\n            class=\"form-control\"\n            id=\"password\"\n            placeholder=\"Password\"\n            required\n          />\n          <small id=\"passwordHelp\" class=\"form-text text-muted\"\n            >Password must be at least 8 characters long.</small\n          >\n        </div>\n        <div class=\"form-group col-md-6\">\n          <label for=\"confirmPassword\">Confirm Password</label>\n          <input\n            v-model=\"user.confirmPassword\"\n            type=\"password\"\n            class=\"form-control\"\n            id=\"confirmPassword\"\n            placeholder=\"Confirm Password\"\n            required\n          />\n          <small id=\"confirmPasswordHelp\" class=\"form-text text-muted\"\n            >Please confirm password.</small\n          >\n        </div>\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n    </form>\n  </section>\n</template>\n\n<script>\nimport Joi from \"joi\";\n\nconst SIGNUP_URL = \"http://localhost:5000/auth/signup\";\n\nconst schema = Joi.object().keys({\n  username: Joi.string()\n    .regex(/(^[a-zA-Z0-9_]+$)/)\n    .min(2)\n    .max(30)\n    .required(),\n  password: Joi.string()\n    .trim()\n    .min(8)\n    .required(),\n  confirmPassword: Joi.string()\n    .trim()\n    .min(8)\n    .required(),\n});\nexport default {\n  data: () => ({\n    errorMessage: \"\",\n    user: {\n      username: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n    },\n  }),\n  watch: {\n    user: {\n      handler() {\n        this.errorMessage = \"\";\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    signup() {\n      if (this.validUser()) {\n        console.log(\"User is valid. sending data to server...\");\n        const body = {\n          username: this.user.username,\n          password: this.user.password,\n        };\n        fetch(SIGNUP_URL, {\n          method: \"POST\",\n          body: JSON.stringify(body),\n          headers: {\n            \"content-type\": \"application/json\",\n          },\n        })\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n            return response.json().then((error) => {\n              throw new Error(error.message);\n            });\n          })\n          .then((user) => {\n            console.log(user);\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      }\n    },\n    validUser() {\n      if (this.user.password !== this.user.confirmPassword) {\n        this.errorMessage = \"Password must match.\";\n      }\n      const { value, error } = schema.validate(this.user);\n\n      if (error === undefined) {\n        return true;\n      }\n      if (error.message.includes(\"username\")) {\n        this.errorMessage = \"Invalid Username.\";\n      } else {\n        this.errorMessage = \"Invalid Password.\";\n      }\n      return false;\n    },\n  },\n};\n</script>\n<style></style>\n"]}]}